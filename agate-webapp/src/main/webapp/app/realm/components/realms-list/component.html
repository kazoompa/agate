<!--
  ~ Copyright (c) 2019 OBiBa. All rights reserved.
  ~
  ~ This program and the accompanying materials
  ~ are made available under the terms of the GNU Public License v3.0.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<h2>
  <ol class="agate-breadcrumb">
    <li><a href="#/admin" translate>global.menu.admin</a></li>
    <li class="active" translate>global.realms</li>
  </ol>
</h2>

<p class="help-block" translate>realms.description</p>

<a ng-href="#/admin/realm/new" class="btn btn-info">
  <i class="fa fa-plus"></i> <span translate>realms.add-realm</span>
</a>

<p class="help-block" ng-if="$ctrl.realms.length == 0 && !loading">
  <span translate>realms.none</span>
</p>

<p ng-if="loading" class="voffset2 loading">
</p>

<div class="table-responsive">
  <table class="table table-bordered table-striped" obiba-table-sorter="logsHistory">
    <thead>
    <tr>
      <th translate>global.name</th>
      <th translate>global.description</th>
      <th translate>global.type</th>
      <th translate>global.status</th>
      <th translate>global.actions</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="realm in $ctrl.realms track by $index">
      <td>
        <a ng-href="#{{'/admin/realm/' + realm.name +'/edit'}}">
          <localized value="realm.title || realm.name" lang="$ctrl.locale.language" key-lang="lang" key-value="value"></localized>
        </a>
      </td>
      <td>
        <localized value="realm.description" lang="$ctrl.locale.language" key-lang="lang" key-value="value"></localized>
      </td>
      <td>{{'realm.' + realm.type | translate}}</td>
      <td>{{'realm.' + realm.status | translate}}</td>
      <td>
        <ul class="list-inline">
          <li>
            <a href ng-click="$ctrl.activateRealm(realm)"
               title="{{'realm.' + (realm.status === 'ACTIVE' ? 'activate' : 'deactivate') | translate}}"><i
              class="fa" ng-class="{'fa-times': realm.status === 'ACTIVE', 'fa-check': realm.status === 'INACTIVE'}"></i></a>
          </li>
          <li>
            <a href ng-href="#/admin/realm/{{realm.name}}/edit" title="{{'edit' | translate}}"><i
              class="fa fa-pencil"></i></a>
          </li>
          <li>
            <a href ng-href="#/admin/realm/new?from={{realm.name}}" title="{{'edit' | translate}}"><i
              class="fa fa-copy"></i></a>
          </li>
          <li>
            <a href ng-click="$ctrl.deleteRealm(realm)" title="{{'delete' | translate}}"><i
              class="fa fa-trash-o"></i></a>
          </li>
        </ul>
      </td>
    </tr>
    </tbody>
  </table>
</div>
